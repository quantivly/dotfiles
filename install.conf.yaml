- defaults:
    link:
      relink: true
      create: true
      backup: true

- clean: ['~', '~/.config']

- link:
    ~/.config/gh/config.yml: gh/config.yml
    ~/.config/git/ignore: config/git/ignore
    ~/.config/git/hooks: config/git/hooks
    ~/.gitconfig: gitconfig
    ~/.zshrc: zshrc
    ~/.p10k.zsh:
      path: p10k.zsh
      if: '[ -f p10k.zsh ]'

- shell:
  - [git submodule update --init --recursive, Installing submodules]
  - |
    # Create ~/.zshrc.local if it doesn't exist
    if [ ! -f ~/.zshrc.local ]; then
      echo "Creating ~/.zshrc.local from template..."
      cp ~/.dotfiles/zsh/zshrc.local.example ~/.zshrc.local
      chmod 600 ~/.zshrc.local
      echo "Please edit ~/.zshrc.local to add machine-specific configuration"
    fi
  - |
    # Create ~/.gitconfig.local if it doesn't exist
    if [ ! -f ~/.gitconfig.local ]; then
      echo "Creating ~/.gitconfig.local from template..."
      cp ~/.dotfiles/gitconfig.local.example ~/.gitconfig.local
      chmod 600 ~/.gitconfig.local
      echo "Please edit ~/.gitconfig.local to add your git user information"
    fi
